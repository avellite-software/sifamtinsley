{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top }}px;
    padding-bottom: {{ section.settings.padding_bottom }}px;
  }

  .trusted-by__header {
    text-align: center;
    margin-bottom: 3rem;
  }

  .trusted-by__heading {
    font-size: 2rem;
    font-weight: 700;
    color: #1c1c1c;
    margin: 0;
  }

  .trusted-by__container {
    display: flex;
    flex-wrap: wrap;
    justify-content: center; /* Centers the items */
    gap: 1.5rem;
    max-width: 1200px; /* Explicit max-width as requested */
    margin: 0 auto;
  }

  .trusted-by__item {
    /* Small box sizing */
    width: 180px;
    padding: 1.5rem;

    /* Styling matches your other cards */
    background-color: #fff;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);

    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    text-decoration: none;
    color: inherit;
  }

  .trusted-by__item:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
  }

  .trusted-by__image-wrapper {
    width: 100%;
    height: 60px; /* Fixed height for alignment */
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 1rem;
  }

  .trusted-by__image {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
    width: auto;
    height: auto;
  }

  .trusted-by__name {
    font-size: 0.9rem;
    font-weight: 600;
    color: #555;
    margin: 0;
    line-height: 1.2;
  }

  @media screen and (max-width: 768px) {
    .trusted-by__item {
      width: 140px; /* Slightly smaller on mobile to fit 2 per row */
      padding: 1rem;
    }
  }
{%- endstyle -%}

<div class="section-{{ section.id }}-padding color-{{ section.settings.color_scheme }} gradient">
  <div class="page-width">
    {%- if section.settings.heading != blank -%}
      <div class="trusted-by__header">
        <h2 class="trusted-by__heading">{{ section.settings.heading | escape }}</h2>
      </div>
    {%- endif -%}

    <div class="trusted-by__container">
      {%- for block in section.blocks -%}
        <div class="trusted-by__item">
          <div class="trusted-by__image-wrapper">
            {%- if block.settings.logo != blank -%}
              {{ block.settings.logo | image_url: height: 60 | image_tag: loading: 'lazy', class: 'trusted-by__image' }}
            {%- else -%}
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 640 640"
                style="width: 100%; height: 100%; max-width: 150px; max-height: 60px;"
              >
                <path d="M192 112C183.2 112 176 119.2 176 128L176 512C176 520.8 183.2 528 192 528L272 528L272 448C272 430.3 286.3 416 304 416L336 416C353.7 416 368 430.3 368 448L368 528L448 528C456.8 528 464 520.8 464 512L464 128C464 119.2 456.8 112 448 112L192 112zM128 128C128 92.7 156.7 64 192 64L448 64C483.3 64 512 92.7 512 128L512 512C512 547.3 483.3 576 448 576L192 576C156.7 576 128 547.3 128 512L128 128zM224 176C224 167.2 231.2 160 240 160L272 160C280.8 160 288 167.2 288 176L288 208C288 216.8 280.8 224 272 224L240 224C231.2 224 224 216.8 224 208L224 176zM368 160L400 160C408.8 160 416 167.2 416 176L416 208C416 216.8 408.8 224 400 224L368 224C359.2 224 352 216.8 352 208L352 176C352 167.2 359.2 160 368 160zM224 304C224 295.2 231.2 288 240 288L272 288C280.8 288 288 295.2 288 304L288 336C288 344.8 280.8 352 272 352L240 352C231.2 352 224 344.8 224 336L224 304zM368 288L400 288C408.8 288 416 295.2 416 304L416 336C416 344.8 408.8 352 400 352L368 352C359.2 352 352 344.8 352 336L352 304C352 295.2 359.2 288 368 288z"/>
              </svg>
            {%- endif -%}
          </div>

          {%- if block.settings.name != blank -%}
            <p class="trusted-by__name">{{ block.settings.name | escape }}</p>
          {%- endif -%}
        </div>
      {%- endfor -%}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Trusted By",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Trusted By"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color Scheme",
      "default": "scheme-1"
    },
    {
      "type": "header",
      "content": "Section Padding"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Top padding",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Bottom padding",
      "default": 36
    }
  ],
  "blocks": [
    {
      "type": "brand",
      "name": "Brand",
      "settings": [
        {
          "type": "image_picker",
          "id": "logo",
          "label": "Logo"
        },
        {
          "type": "text",
          "id": "name",
          "label": "Company Name",
          "default": "Company Name"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Trusted By",
      "blocks": [{ "type": "brand" }, { "type": "brand" }, { "type": "brand" }, { "type": "brand" }]
    }
  ]
}
{% endschema %}
