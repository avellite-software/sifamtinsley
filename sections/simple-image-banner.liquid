{% comment %}
  Section: Simple Image Banner
  - A single, clickable image that collapses if no image is provided.
{% endcomment %}

{%- style -%}
  .simple-banner__{{ section.id }} {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
  }
  .simple-banner__link {
    display: block;
    line-height: 0; /* Removes extra space below the image */
  }
  .simple-banner__image {
    width: 100%;
    height: auto; /* Maintains aspect ratio */
  }
  @media screen and (min-width: 750px) {
    .simple-banner__{{ section.id }} {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }
{%- endstyle -%}

{%- if section.settings.image != blank -%}
  <div
    class="simple-banner__{{ section.id }} page-width"
    style="border-radius: {{ section.settings.border_radius }}"
  >
    {%- if section.settings.link != blank -%}
      <a href="{{ section.settings.link }}" class="simple-banner__link">
    {%- endif -%}

    {%- liquid
      assign image = section.settings.image
      assign image_height = image.width | divided_by: image.aspect_ratio
      assign widths = '375, 550, 750, 1100, 1500, 1780, 2000'
    -%}
    {{
      image
      | image_url: width: 2000
      | image_tag: loading: 'lazy', class: 'simple-banner__image', height: image_height, sizes: '100vw', widths: widths
    }}

    {%- if section.settings.link != blank -%}
      </a>
    {%- endif -%}
  </div>
{%- endif -%}

{% schema %}
{
  "name": "Simple Image Banner",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "range",
      "id": "border_radius",
      "min": 0,
      "max": 40,
      "step": 2,
      "unit": "px",
      "label": "Card border radius",
      "default": 12
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image"
    },
    {
      "type": "url",
      "id": "link",
      "label": "Link",
      "info": "Optional. Where the banner image will link to."
    },
    {
      "type": "header",
      "content": "Section Spacing"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Top padding",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Bottom padding",
      "default": 36
    }
  ],
  "presets": [
    {
      "name": "Simple Image Banner"
    }
  ]
}
{% endschema %}
